#!/bin/bash

echo "Pre-commit hook is running..."

# Run gofmt on all .go files
echo "Running gofmt..."
GOFMT_FILES=$(gofmt -l .)
if [ -n "${GOFMT_FILES}" ]; then
    echo "The following files need to be formatted:"
    echo "${GOFMT_FILES}"
    echo "Running gofmt -w ."
    gofmt -w .
    git add ${GOFMT_FILES}
    echo "Files have been formatted and staged."
    exit 0
fi

echo "No files need formatting."
exit 0 